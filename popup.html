<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>微光·求职搭子</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="main-container">
    <!-- 顶部标题 -->
    <div class="header" style="flex-direction: column; align-items: flex-start; gap: 4px; border-bottom: 1px solid rgba(0, 190, 189, 0.2); padding-bottom: 10px;">
        <div style="display: flex; align-items: center; gap: 8px;">
            <span style="width: 8px; height: 8px; background: #00bebd; border-radius: 50%; box-shadow: 0 0 8px #00bebd; animation: pulse 2s infinite;"></span>
            <h3 style="color: #333; font-family: 'Times New Roman', serif; letter-spacing: 1px; font-size: 18px; margin: 0;">✨ 微光·求职搭子</h3>
            <span class="version" style="background: rgba(0, 190, 189, 0.1); color: #00bebd; border: 1px solid rgba(0, 190, 189, 0.3);">PRO</span>
        </div>
        <div style="font-size: 12px; color: #555; font-weight: 500; margin-top: 2px;">一款带夜视功能的职场翻译机</div>
        <div style="font-size: 11px; color: #90a4ae; font-style: italic; margin-top: 4px; line-height: 1.4;">
            “别怕黑，这里有光。”<br>
            “把困难留给 AI，把尊严留给自己。”
        </div>
    </div>

  <!-- 区域1：智能引导区 (小白用户主界面) -->
  <!-- 卡片1：身份凭证 -->
  <div class="card">
    <div class="card-title">🔑 身份凭证</div>
    <div class="input-group">
      <label>DeepSeek API Key</label>
      <input type="password" id="apiKey" placeholder="sk-...">
      <div class="tip" id="apiKeyTip">
        没有Key？去 <a href="https://platform.deepseek.com" target="_blank">DeepSeek官网</a> 申请
      </div>
    </div>
  </div>

  <!-- 卡片2：简历画像 -->
  <div class="card">
    <div class="card-title">
        📄 简历画像
    </div>
    <div class="input-group">
      <textarea id="resume" placeholder="请在此粘贴你的简历内容（支持自动保存）..."></textarea>
      <div class="char-count">已输入 <span id="resumeCharCount">0</span> 字符 (建议 > 200)</div>
    </div>
  </div>

  <!-- 区域2：状态反馈模态框 (默认隐藏) -->
  <div id="aiConfigModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <h4 class="modal-title">🤖 AI 正在为您规划...</h4>
      
      <!-- 进度条 -->
      <div class="progress-container">
        <div class="step-item" id="step1">
          <div class="step-icon">1</div>
          <span>分析简历画像</span>
        </div>
        <div class="step-line"></div>
        <div class="step-item" id="step2">
          <div class="step-icon">2</div>
          <span>生成匹配策略</span>
        </div>
        <div class="step-line"></div>
        <div class="step-item" id="step3">
          <div class="step-icon">3</div>
          <span>组建关键词库</span>
        </div>
      </div>

      <!-- 动态状态文字 -->
      <div id="configStatusText" class="status-text">准备开始...</div>

      <!-- 结果预览区 -->
      <div id="configPreview" class="preview-box" style="display: none;">
        <!-- 动态插入内容 -->
      </div>

      <!-- 操作按钮 -->
      <div class="modal-actions" id="modalButtons" style="display: none;">
        <button id="modalApplyBtn" class="btn-primary">✅ 确认并应用配置</button>
        <button id="modalCancelBtn" class="btn-secondary">取消</button>
      </div>
    </div>
  </div>

  <!-- 区域3：偏好设置 -->
  <div class="card">
    <div class="card-title">⚙️ 偏好设置</div>
    <!-- 新增：HR活跃度过滤开关 -->
    <div class="switch-row">
        <label class="switch">
          <input type="checkbox" id="filterActiveHr" checked>
          <span class="slider round"></span>
        </label>
        <span>🛡️ 过滤不活跃HR (仅今日/3日内/本周)</span>
    </div>
  </div>

  <div class="footer-actions">
    <button id="saveBtn" class="save-btn">💾 保存所有配置</button>
    <div id="status"></div>
  </div>
  </div> <!-- 关闭 main-container -->

  <!-- 本地作者弹窗 (Local Author Modal) -->
  <div id="localAuthorModal" class="modal-overlay" style="display: none;">
    <!-- 弹窗内容容器 -->
    <div class="modal-content" style="text-align: center; position: relative; padding: 25px 20px; max-width: 300px;">
        <div id="closeLocalAuthorModal" style="position: absolute; top: 12px; right: 15px; cursor: pointer; font-size: 24px; color: #ccc;">&times;</div>
        
        <!-- 标题 -->
        <h4 style="margin: 0 0 15px 0; color: #333; font-size: 16px; font-weight: 800; letter-spacing: 0.5px;">
            📡 旷野信号塔
        </h4>
        
        <!-- 新增：呼唤语 -->
        <div style="font-size: 10px; color: #90a4ae; margin-bottom: 10px; font-style: italic;">
            “ 致 每一位在寒冬中赶路的战友 ”
        </div>

        <!-- 二维码 -->
        <div style="margin: 0 auto 12px auto; width: 150px; height: 150px; border: 4px solid #f5f5f5; border-radius: 12px; padding: 5px;">
            <img src="images/author_qr.jpg" style="width: 100%; height: 100%; object-fit: cover; border-radius: 6px;" alt="QR Code">
        </div>
        
        <!-- 核心情感文案 -->
        <div style="margin-bottom: 18px; position: relative; display: inline-block;"> 
             <p style=" 
                 font-size: 13px; 
                 color: #546e7a; 
                 margin: 0; 
                 font-weight: 600; 
                 letter-spacing: 1px; 
                 position: relative; 
                 z-index: 2; 
             "> 
                 “ 微光虽弱，但我们一直在。” 
             </p> 
             <!-- 底部加一个淡黄色的高光条，增加'微光'的感觉 --> 
             <div style=" 
                 position: absolute; 
                 bottom: 2px; 
                 left: 0; 
                 width: 100%; 
                 height: 6px; 
                 background: rgba(255, 235, 59, 0.4); 
                 z-index: 1; 
                 border-radius: 4px; 
             "></div> 
         </div>
        
        <!-- 引导区：卡片化设计 -->
        <div style="
            background: #f8fcfc;
            border: 1px solid #e0f2f1;
            border-radius: 8px;
            padding: 12px 15px;
            margin-bottom: 20px;
            text-align: left;
            box-shadow: inset 0 0 10px rgba(0, 190, 189, 0.05);
        ">
            <div style="display:flex; align-items:center; margin-bottom: 6px; font-size: 13px; color: #333;">
                <span style="font-size:14px; margin-right:6px;">1️⃣</span>
                关注公号：<strong style="color: #00838f; margin-left:4px;">旷野里的猫-AI</strong>
            </div>
            <div style="display:flex; align-items:center; font-size: 13px; color: #333;">
                <span style="font-size:14px; margin-right:6px;">2️⃣</span>
                后台回复：<strong style="color: #e65100; background:#fff3e0; padding:0 4px; border-radius:4px; margin-left:4px;">能量</strong>
            </div>
            
            <div style="
                margin-top: 8px;
                padding-top: 8px;
                border-top: 1px dashed #cfd8dc;
                font-size: 10px;
                color: #90a4ae;
                display: flex;
                align-items: center;
            ">
                <span style="margin-right: 4px;">ℹ️</span>
                每日限量补给，留给急需的战友
            </div>
        </div>
        
        <!-- 输入区 -->
        <div style="display: flex; gap: 8px;">
            <input type="text" id="redeemKeyInput" placeholder="粘贴今日暗号..." 
                style="flex: 1; padding: 10px; border: 1px solid #e0e0e0; border-radius: 6px; font-size: 13px; outline: none; transition: border 0.3s;">
            <button id="redeemKeyBtn" style="
                padding: 0 20px;
                background: linear-gradient(135deg, #00bebd 0%, #00897b 100%);
                color: white;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                font-weight: bold;
                font-size: 14px;
                white-space: nowrap;
                box-shadow: 0 4px 12px rgba(0, 190, 189, 0.3);
                transition: all 0.2s ease;
                height: 40px; /* 增加高度 */
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 4px;
            "
            onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 6px 15px rgba(0, 190, 189, 0.4)';"
            onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(0, 190, 189, 0.3)';"
            >
                🔌 接通信号
            </button>
        </div>
        <div id="redeemStatus" style="font-size: 11px; height: 16px; margin-top: 8px; text-align: left; padding-left: 4px;"></div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
